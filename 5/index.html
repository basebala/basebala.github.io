<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 3 - Face Morphing</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        h1 {
            text-align: center;
            color: #000000;
            padding: 20px;
        }
        h2 {
            text-align: center;
        }
        .description {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            text-align: left;
            color: #000000;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 5px;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .image-grid img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            display: block;
        }
        .image-grid .caption {
            text-align: center;
            margin-top: 5px;
            font-size: 1.5em;
            color: #003366;
        }
        .image-grid .info {
            text-align: center;
            margin-top: 5px;
            font-size: .9em;
            color: #003366;
        }

        .image-grid2 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .image-grid2 img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            display: block;
        }
        .image-grid2 .caption {
            text-align: center;
            margin-top: 5px;
            font-size: 1.5em;
            color: #003366;
        }
        .image-grid2 .info {
            text-align: center;
            margin-top: 5px;
            font-size: .9em;
            color: #003366;
        }
        .extra-credit {
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            text-align: center;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .extra-credit h2 {
            color: #003366;
        }
        .extra-credit .image-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        .extra-credit .image-grid img {
            height: 200px;
            object-fit: cover;
        }
        .extra-credit p {
            margin-top: 20px;
            font-size: 1.1em;
            color: #000000;
        }
    </style>
</head>
<body>
    <h1>Project 4 - Image Warping and Mosaicing</h1>
    <h2>Pictures, Homographies, and Warping</h2>
    <div class="description">
        <p>For this part, I first wrote the functioni computeH which would take in the set of corresponding points between the two images and compute the homography matrix to transform one into the other. I then created the warp function, which would initially warp the corners to determine the output shape and shift the warped image accordingly. I would then apply the homography to all points in the original image and finally output the warped image, the translation matrix, and the points that were transformed through the combined translation/homography.</p>
    </div>
    <h2>Rectification</h2>
    <div class="description">
        <p>Here, I used my warp function to warp images of bowling pins (from fowling) and a TV with Federer into rectangles. My warp function included an optional result shape parameter to accomplish this. I've attached the images and the corresponding rectifications here.</p>
    </div>
    <div class="image-grid">
        <figure>
            <img src="federer.jpg" alt="Cathedral">
            <div class="info">Federer Original</div>
        </figure>
        <figure>
            <img src="rect_federer.png" alt="Cathedral">
            <div class="info">Federer Rectangle</div>
        </figure>
        <figure>
            <img src="new_pins.jpg" alt="Cathedral">
            <div class="info">Bowling Original</div>
        </figure>
        <figure>
            <img src="rect_bowling.png" alt="Cathedral">
            <div class="info">Bowling Rectangle</div>
        </figure>
    </div>
    <h2>Blending Mosaics</h2>
    <div class="description">
        <p>Here I created a function to build the mosaic from two images and did this for three different scenes: SF lunar new year, a bedroom, and sushi. I initially warped one image onto the other and created a blank canvas. I then found the best displacement between the two images and offset the warped image by this displacement. Finally, I put both canvases on each other to create the final canvas, averaging points that were in both images.</p>
    </div>
    <div class="image-grid2">
        <figure>
            <img src="lunar_1.jpg" alt="Cathedral">
            <figcaption class="caption">First Lunar</figcaption>
        </figure>
        <figure>
            <img src="lunar_2.jpg" alt="Cathedral">
            <figcaption class="caption">Second Lunar</figcaption>
        </figure>
        <figure>
            <img src="lunar_mosaic.jpg" alt="Cathedral">
            <figcaption class="caption">Lunar Mosaic</figcaption>
        </figure>
        <figure>
            <img src="bed_first.jpg" alt="Cathedral">
            <figcaption class="caption">First Bed</figcaption>
        </figure>
        <figure>
            <img src="bed_second.jpg" alt="Cathedral">
            <figcaption class="caption">Second Bed</figcaption>
        </figure>
        <figure>
            <img src="bed_mosaic.jpg" alt="Cathedral">
            <figcaption class="caption">Bed Mosaic</figcaption>
        </figure>
        <figure>
            <img src="vlsb_1.jpg" alt="Cathedral">
            <figcaption class="caption">VLSB 1</figcaption>
        </figure>
        <figure>
            <img src="vlsb_2.jpg" alt="Cathedral">
            <figcaption class="caption">VLSB 2</figcaption>
        </figure>
        <figure>
            <img src="vlsb_mosaic.jpg" alt="Cathedral">
            <figcaption class="caption">VLSB Mosaic</figcaption>
        </figure>
    </div>
    <h2>Harris Corner Detection</h2>
    <div class="description">
        <p>I used the provided function in the project spec for detecting corners with Harris. I have shown a couple images that I used for automatic keypoint detection and blending with all harris corners below.</p>
    </div>
    <div class="image-grid">
        <figure>
            <img src="lunar_1_harris.png" alt="Cathedral">
            <div class="info">Lunar Harris 1</div>
        </figure>
        <figure>
            <img src="lunar_2_harris.png" alt="Cathedral">
            <div class="info">Lunar Harris 2</div>
        </figure>
    </div>
    <h2>ANMS</h2>
    <div class="description">
        <p>I used the dist2 function provided for ANMS to compute distances between keypoints chosen by Harris. I used a c_robust value of 1 to ensure that I didn't have neighbors that were both included as keypoints. I have displayed here a couple images that I used. For the most part, I took the top 100 by minimum radius for ANMS.</p>
    </div>
    <div class="image-grid">
        <figure>
            <img src="lunar_1_anms.png" alt="Cathedral">
            <div class="info">Lunar ANMS 1</div>
        </figure>
        <figure>
            <img src="lunar_2_anms.png" alt="Cathedral">
            <div class="info">Lunar ANMS 2</div>
        </figure>
    </div>
    <h2>Final Images</h2>
    <div class="description">
        <p>I created the features with normalization and flattening, using a 40x40 grid around keypoints (downsized by scale of 5). I then did automatic feature matching, using threshold of .7 for NN and threshold of 3.5 for inliers. Finally, after computing the best homography with 4-point RANSAC, I used this and made a call to my mosaic function from 4A to create final images as displayed below. Furthermore, I displayed the manually computed mosaics (manually created keypoints) below the automatics for reference.</p>
    </div>
    <div class="image-grid2">
        <figure>
            <img src="lunar_1.jpg" alt="Cathedral">
            <figcaption class="caption">First Lunar</figcaption>
        </figure>
        <figure>
            <img src="lunar_2.jpg" alt="Cathedral">
            <figcaption class="caption">Second Lunar</figcaption>
        </figure>
        <figure>
            <img src="auto_lunar_mosaic.jpg" alt="Cathedral">
            <figcaption class="caption">Lunar Auto Mosaic</figcaption>
        </figure>
        <figure>
            <img src="bed_first.jpg" alt="Cathedral">
            <figcaption class="caption">First Bed</figcaption>
        </figure>
        <figure>
            <img src="bed_second.jpg" alt="Cathedral">
            <figcaption class="caption">Second Bed</figcaption>
        </figure>
        <figure>
            <img src="auto_bed_mosaic.jpg" alt="Cathedral">
            <figcaption class="caption">Bed Auto Mosaic</figcaption>
        </figure>
        <figure>
            <img src="vlsb_1.jpg" alt="Cathedral">
            <figcaption class="caption">First VLSB</figcaption>
        </figure>
        <figure>
            <img src="vlsb_2.jpg" alt="Cathedral">
            <figcaption class="caption">Second VLSB</figcaption>
        </figure>
        <figure>
            <img src="auto_vlsb_mosaic.jpg" alt="Cathedral">
            <figcaption class="caption">VLSB Auto Mosaic</figcaption>
        </figure>
        <figure>
            <img src="lunar_mosaic.jpg" alt="Cathedral">
            <figcaption class="caption">Manual Lunar</figcaption>
        </figure>
        <figure>
            <img src="bed_mosaic.jpg" alt="Cathedral">
            <figcaption class="caption">Manual Bed</figcaption>
        </figure>
        <figure>
            <img src="vlsb_mosaic.jpg" alt="Cathedral">
            <figcaption class="caption">Manual VLSB</figcaption>
        </figure>
    </div>
    <h2>Bells and Whistles - Rotation Invariance</h2>
    <div class="description">
        <p>I used SIFT detection here to detect keypoints and then create features that were rotation invariant. Below I have displayed sushis, along with both normal blending of the sushis (my standard function) and blending with rotation-invariant features. With rotation-invariance, it is far better.</p>
    </div>
    <div class="image-grid">
        <figure>
            <img src="new_sushi.jpg" alt="Cathedral">
            <div class="info">Sushi</div>
        </figure>
        <figure>
            <img src="new_sushi_angle.jpg" alt="Cathedral">
            <div class="info">Sushi Angle</div>
        </figure>
        <figure>
            <img src="sushi_standard.jpg" alt="Cathedral">
            <div class="info">Sushi without Rotation-Invariance</div>
        </figure>
        <figure>
            <img src="rot_sushi.jpg" alt="Cathedral">
            <div class="info">Sushi with Rotation-Invariance</div>
        </figure>
    </div>
    <h2>Bells and Whistles - Panorama</h2>
    <div class="description">
        <p>To create a panoramic image with automatic detection of image order, I used a current homography matrix which I updated at each step. To obtain which images to place in which order, I created a matching graph, through which feature strengths detected which images to place in which order. Finally, once this order was determined, the current homography loop would add each image onto the canvas until complete.</p>
    </div>
    <div class="image-grid">
        <figure>
            <img src="pano_v_1.jpg" alt="Cathedral">
            <div class="info">VLSB 1</div>
        </figure>
        <figure>
            <img src="pano_v_2.jpg" alt="Cathedral">
            <div class="info">VLSB 2</div>
        </figure>
        <figure>
            <img src="pano_v_3.jpg" alt="Cathedral">
            <div class="info">VLSB 3</div>
        </figure>
        <figure>
            <img src="final_pano.jpg" alt="Cathedral">
            <div class="info">Panoramic VLSB</div>
        </figure>
    </div>
    <h2>Bells and Whistles 4A - Circle</h2>
    <div class="description">
        <p>I tried morphing images into a circular shape instead of a square. To do this, I created 10 equidistant points on a circle using basic trigonometry in Python. I then had the user choose 10 equidistant points using a circlfy.py file, for then morphing the shape into a circle. Here is a flower without this circular morph and with, as well as sushi bowl.</p>
    </div>
    <div class="image-grid">
        <figure>
            <img src="petaly_flower.jpg" alt="Cathedral">
            <div class="info">Flower no circle</div>
        </figure>
        <figure>
            <img src="circle_federer.jpg" alt="Cathedral">
            <div class="info">Circle flower</div>
        </figure>
        <figure>
            <img src="new_sushi_angle.jpg" alt="Cathedral">
            <div class="info">Sushi without circle (bowl)</div>
        </figure>
        <figure>
            <img src="circle_sushi.jpg" alt="Cathedral">
            <div class="info">Circular sushi bowl</div>
        </figure>
    </div>
</body>
</html>
